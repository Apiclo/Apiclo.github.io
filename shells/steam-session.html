<!DOCTYPE html>
<html>

<head>
    <link href="../css/custom.css" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=0.1, maximum-scale=4.0, minimum-scale=0.8, user-scalable=yes" />
    <title>安装须知</title>
    <style>
        body {
            background-color: #202020;
        }

        .text-card {
            background-color: #303030;
            color: #dedede;
            margin: 10px;
        }

        a {
            color: #abbbff;
            font-weight: 600;
            text-decoration: none;
        }

        td {
            color: #dedede;
            font-family: 'Courier New', 'Ubuntu Mono', Courier, monospace !important;
            padding: 0.5rem 5px;
            text-align: left;
            border: 1px solid #555;
        }

        table {
            background-color: #282828;
            padding: 1rem;
            border-collapse: collapse;
            width: 420px;
        }

        .tablewrapper {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            align-content: center;
            flex-direction: column;
            flex-wrap: wrap;
            margin: 10px auto;
            padding: 20px;
            border-radius: 15px;
            background-color: #282828;
            width: 420px;
        }

    </style>
</head>

<body>
    <div class="navbar">
        <div class="navleft"><img src="../img/favicon.png" width="40" height="40"></div>
    </div>
    <div class="navright">
        <a href="#t4" class="navtext text-card">安装脚本</a>
        <a href="https://github.com/Apiclo/Apiclo.github.io/tree/master/shells" class="navtext text-card">github托管地址</a>
    </div>
    </div>
    <div class="text-card">
        <h1 id="t1">安装流程</h1>
        <h2>1.安装steam</h2>
        <h3>(1).steam-runtime(建议)</h3>
        <h3>(2)steam-native(不建议)</h3>
        <p>ArchWiki原话翻译:</p>
        <p>Steam Native Runtime
            警告： 不建议使用 Steam Native Runtime，因为它可能会因为二进制不兼容而导致某些游戏无法运行，也可能会错过 Steam Runtime 中的某些库。
            steam-native-runtime 软件包依赖于 130 多个软件包，以构成 Steam Runtime 的原生替换，但某些游戏可能仍需要额外的软件包。</p>
        <p>该软件包提供了 Steam Native 脚本，在启动 Steam 时使用 STEAM_RUNTIME=0 环境变量，使其忽略运行时，只使用系统库。</p>
        <p>您也可以只手动安装所需的软件包，在不安装 steam-native-runtime 的情况下使用 Steam 原生运行时。</p>
        <h2>2.安装gamescope</h2>
        <h3>ArchWiki介绍</h3>
        <p><a href="https://github.com/ValveSoftware/gamescope">Gamescope</a> 是来自 Valve 并用于 <a
                href="https://wiki.archlinuxcn.org/wzh/index.php?title=Steam_Deck&action=edit&redlink=1"
                title="Steam Deck（页面不存在）">Steam Deck</a> 的 <a
                href="https://wiki.archlinuxcn.org/wiki/Wayland#Compositors" title="Wayland">微混成器</a>.
            其目标是提供一种针对游戏量身定制的独立合成器，并支持许多以游戏为中心的功能，例如:</p>
        <ul>
            <li>分辨率伪装.</li>
            <li>使用 AMD FidelityFX™ Super Resolution (FSR)或 NVIDIA Image Scaling (NIS)进行图像上采样.</li>
            <li>限制帧率.</li>
        </ul>
        <p>作为一个微混成器，它被设计为在现有桌面环境之上作为嵌套会话运行，尽管也可以将其用作嵌入式混成器。</p>
        <h3>驱动要求</h3>
        <ul>
            <li>AMD: Mesa 20.3 或更高</li>
            <li>Intel: Mesa 21.2 或更高</li>
            <li>NVIDIA: 专有驱动 515.43.04 或更高，以及 <code>nvidia-drm.modeset=1</code>
                <a href="https://wiki.archlinuxcn.org/wiki/Kernel_parameter" title="Kernel parameter">内核参数</a>
            </li>
        </ul>

        <h3>(1)gamescope(ValveSoftware)</h3>
        <p><a href="https://github.com/ValveSoftware/gamescope">https://github.com/ValveSoftware/gamescope</a>
        </p>
        <h3>(2)gamescope-plus(ChimeraOS)</h3>
        <p><a href="https://github.com/ChimeraOS/gamescope">https://github.com/ChimeraOS/gamescope</a></p>
        <p>ValveSoftware或ChimeraOS二选一,各自有不同的特性</p>
        <h2>3.安装gamescope-session</h2>
        <p>gamescope-session-plus(ChimeraOS)</p>
        <p><a href="https://github.com/ChimeraOS/gamescope-session">https://github.com/ChimeraOS/gamescope-session</a>
        </p>

        <h2>4.安装gamescope-session-steam</h2>
        <p><a
                href="https://github.com/ChimeraOS/gamescope-session-steam">https://github.com/ChimeraOS/gamescope-session-steam</a>
        </p>
        <h2>5.显示管理器切换会话</h2>
        <h1 id="t2">故障排除:</h1>
        <h2>1.启动steam会话黑屏闪退</h2>
        <h3>原因1:gamescope-session-plus没有运行</h3>
        <p>解决办法1:先在桌面环境下运行gamescope-session-plus steam,大概率会闪退,检查gamescope是否正常,gamescope
            --version.如果正常,就需要重新安装gamesscope
        </p>
        <h3>
            <strong>原因2:gamescope缺少依赖</strong>
        </h3>
        <p>这是aur中gamescope的PKGBUILD提到的必要依赖,逐个检查,看看缺少哪一个</p>
        <div class="tablewrapper">
            <table>
                <tbody>
                    <tr class="tr">
                        <td>gcc-libs</td>
                        <td>glibc</td>
                        <td>libavif</td>
                    </tr>
                    <tr class="tr">
                        <td>seatd</td>
                        <td>libcap</td>
                        <td>libdecor</td>
                    </tr>
                    <tr class="tr">
                        <td>libdrm</td>
                        <td>vulkan-icd-loader</td>
                        <td>libinput</td>
                    </tr>
                    <tr class="tr">
                        <td>libpipewire</td>
                        <td>libx11</td>
                        <td>wayland</td>
                    </tr>
                    <tr class="tr">
                        <td>libxtst</td>
                        <td>libxxf86vm</td>
                        <td>sdl2</td>
                    </tr>
                    <tr class="tr">
                        <td>xcb-util-errors</td>
                        <td>libxcb</td>
                        <td>libxcomposite</td>
                    </tr>
                    <tr class="tr">
                        <td>libxdamage</td>
                        <td>xcb-util-wm</td>
                        <td>libxext</td>
                    </tr>
                    <tr class="tr">
                        <td>libxfixes</td>
                        <td>libxkbcommon</td>
                        <td>xorg-server-xwayland</td>
                    </tr>
                    <tr class="tr">
                        <td>libxmu</td>
                        <td>libxrender</td>
                        <td>libxres</td>
                    </tr>
                    <tr class="tr">
                        <td>benchmark</td>
                        <td>cmake</td>
                        <td>git</td>
                    </tr>
                    <tr class="tr">
                        <td>glslang</td>
                        <td>meson</td>
                        <td>ninja</td>
                    </tr>
                    <tr class="tr">
                        <td>vulkan-headers</td>
                        <td>wayland-protocols</td>
                        <td>mangohud</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h2>2.性能监控面板不显示</h2>
        <h3>原因:缺少mangohud</h3>
        <p>解决办法:安装mongohud软件包</p>
        <h1 id="t3">须知:</h1>
        <p>gamescope的全局FSR不会主动将你的画面进行低分辨率处理和上采样,如果你的窗口分辨率与物理分辨率相同,FSR是不会任何作用的.</p>
        <p>你需要手动将你的窗口分辨率降低后使用Steam的菜单将窗口缩放选择为&quot;适应&quot;</p>
        <p>它的实现方式是如果全屏窗口分辨率低于显示器分辨率,FSR会决定窗口的每个像素点应该对应屏幕的哪个像素点,使显示效果不像线性缩放那样模糊.</p>
        <p>而且大部分游戏需要在游戏中设置为无边框窗口,且游戏窗口分辨率低于物理分辨率,全局FSR才会介入.</p>
        <p>如果某些游戏中选择的独占全屏,就算游戏窗口分辨率低于物理分辨率,FSR也不会起作用.游戏实际输出还是独占的steam客户端中为游戏设置的分辨率.</p>
        <h1 id="t4">安装脚本</h1>
        <div class="inlinecode">

            <button class="copy-button" onclick="copyToClipboard()">复制</button>
            <div>
                <span style="color: rgb(193, 255, 255);font-weight: 600">curl</span>
                <span style="color: rgb(255, 214, 209);">-Ls</span>
                <span
                    style="color: rgb(218, 218, 255);">https://raw.githubusercontent.com/Apiclo/Apiclo.github.io/master/shells/steamos.sh</span>
                <span style="color: rgb(255, 214, 209);">-o</span>
                <span style="color: rgb(218, 218, 255);"> steam-session.sh </span>
                <span> && </span>
                <span style="color: rgb(193, 255, 255);font-weight: 600">/bin/bash</span>
                <span style="color: rgb(218, 218, 255);">steam-session.sh</span>
            </div>
        </div>
        <br><br><br><br><br><br><br><br><br>
    </div>

    <br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br>
    <script>
        function copyToClipboard() {
            // 获取代码内容
            const codeContent = document.querySelector('.inlinecode > div').innerText;

            // 创建一个临时文本区域来复制内容
            const textArea = document.createElement('textarea');
            textArea.value = codeContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
        }
    </script>
</body>

</html>
